<div
  [ngClass]="focused ? 'bg-[--backdrop]' : ''"
  class="fixed bottom-0 left-0 right-0 top-0 transition-colors duration-300"
><!-- OVERLAY BACKDROP --></div>
<nav class="sticky top-0 flex h-14 bg-[--navbar] text-[--primary]">
  <ul
    [ngClass]="focused ? 'pr-4 md:px-4' : 'px-4'"
    class="mx-auto flex h-10 w-full max-w-7xl items-center justify-end self-center transition-all duration-300"
  >
    <li [ngClass]="focused ? 'w-0 md:w-12' : 'w-12'" class="mr-4 transition-all duration-300">
      <a [ngClass]="focused ? 'w-0 md:w-12' : 'w-12'" class="flex duration-200" routerLink="/">
        <mat-icon [svgIcon]="Icons.AppLogo" aria-hidden="false" aria-label="Home" inline></mat-icon>
      </a>
    </li>
    <li class="w-full focus-within:grow">
      <form
        (click)="q.focus()"
        class="flex h-10 items-center rounded-full border-2 border-transparent bg-[--search-bg] transition-all duration-300 focus-within:border-[--primary] hover:bg-[--search-hover] hover:focus-within:bg-[--search-bg]"
      >
        <mat-icon [fontIcon]="Icons.Search" class="mx-1 text-[--search-icon]"></mat-icon>
        <input
          #q (blur)="focused = false" (focus)="focused = true"
          class="w-full rounded-r-full bg-inherit text-[--search-text] placeholder-[--search-placeholder] focus:outline-none"
          id="q" placeholder="Search questions" type="text"
        />
      </form>
    </li>
    <li class="ml-4 md:hidden">
      <button
        [matMenuTriggerFor]="focused ? null : menu"
        aria-label="menu" mat-icon-button type="button"
      >
        <mat-icon
          [fontIcon]="Icons.Close" [ngClass]="focused ? 'visible opacity-100' : 'invisible opacity-0'"
          class="absolute transition-all duration-300"
        ></mat-icon>
        <mat-icon
          [fontIcon]="Icons.Menu" [ngClass]="focused ? 'invisible opacity-0' : 'visible opacity-100'"
          class="transition-all duration-300"
        ></mat-icon>
      </button>
    </li>
    <li class="ml-4 hidden lg:block">
      <button class="w-max" mat-button type="button">ASK A QUESTION</button>
    </li>
    <li class="ml-4 hidden md:block">
      <button class="w-max" mat-button type="button">LOG IN</button>
    </li>
    <li class="ml-4 hidden md:block">
      <button class="w-max" mat-flat-button type="button">JOIN FOR FREE</button>
    </li>
  </ul>
</nav>

<!-- MOBILE MENU -->
<mat-menu #menu="matMenu">
  <button mat-menu-item>
    <mat-icon [fontIcon]="Icons.Add"></mat-icon>
    <span>Ask a question</span>
  </button>
  <button mat-menu-item>
    <mat-icon [fontIcon]="Icons.Login"></mat-icon>
    <span>Login</span>
  </button>
  <button mat-menu-item>
    <mat-icon [fontIcon]="Icons.Register"></mat-icon>
    <span>Register</span>
  </button>
</mat-menu>
